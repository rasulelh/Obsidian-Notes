Мы с вами познакомились с некоторыми особенностями файловой системы ext4, и сейчас я хочу рассказать о том, что такое хардлинки и софтлинки в операционной системе Linux. Возможно, кто-то уже слышал эти термины, а кто-то — нет, но поскольку вы уже знакомы с основами файловой системы Linux, эта тема покажется вам понятной.

Начнём с хардлинков. Хардлинк (жёсткая ссылка) — это, по сути, дополнительное имя для уже существующего file. Когда мы выполняем команду `ls -l`, второй столбец показывает количество хардлинков для file. Например, если для file «file3» показано число 1, это означает, что у file есть только одно имя. Если создать хардлинк с помощью утилиты `ln`, то, например, команда

```
ln file3 file3_hl
```

создаст дополнительное имя для file. После этого у «file3» количество хардлинков увеличится до 2, а оба имени (оригинальное и созданное) будут иметь одинаковые права доступа и один и тот же inode. Это происходит потому, что хардлинк — это всего лишь ещё одна запись в каталоге, указывающая на тот же inode file. File будет существовать до тех пор, пока хотя бы одна запись (хардлинк) на него остаётся. При удалении одного из имён счётчик хардлинков уменьшается, и только при удалении последнего имени данные file становятся недоступными.

Следует отметить, что хардлинки нельзя создавать для каталогов. Это сделано для предотвращения ситуаций, когда из-за множественных ссылок может возникнуть циклическая структура, из которой уже невозможно выйти. Кроме того, хардлинки работают только в пределах одной файловой системы, поскольку inode являются уникальными только внутри одной файловой системы.

Теперь перейдём к софтлинкам (символическим ссылкам). Софтлинк — это по сути ярлык или ссылка, которая представляет собой отдельный file, содержащий путь к другому file или каталогу. Создать символическую ссылку можно командой

```
ln -s источник ссылка
```

В отличие от хардлинков, символические ссылки могут ссылаться на file в разных файловых системах и даже на каталоги. При обращении к символической ссылке система переходит к file, на который она указывает, и уже затем применяются права доступа того file. Софтлинк имеет свои права (как правило, 777), но они влияют лишь на возможность изменения самой ссылки, а не на доступ к целевому file.

Таким образом, можно сделать вывод:

- **Хардлинки** — это дополнительные имена для одного и того же file, которые указывают на один и тот же inode. Они не занимают отдельное место для хранения данных и работают только в пределах одной файловой системы.
    
- **Символические ссылки (софтлинки)** — это отдельные files, содержащие путь к другому file или каталогу, и могут пересекать границы файловых систем.
    

Эти механизмы позволяют гибко управлять files в Linux: хардлинки обеспечивают зеркалирование имени, а софтлинки дают возможность создавать ссылки на объекты вне текущей файловой системы или на каталоги, что делает систему более удобной и гибкой.

---

### Выжимка

- **Хардлинки:**
    
    - Представляют собой дополнительное имя для file, указывающее на один и тот же inode.
        
    - Количество хардлинков отображается в выводе `ls -l`.
        
    - Работают только в пределах одной файловой системы.
        
    - Невозможно создавать для каталогов (для предотвращения циклических структур).
        
- **Символические ссылки (софтлинки):**
    
    - Представляют собой files, содержащие путь к другому file или каталогу.
        
    - Могут ссылаться на объекты в разных файловых системах.
        
    - Имеют отдельные права доступа, которые влияют только на саму ссылку.
        

---

Таким образом, мы рассмотрели особенности создания и работы хардлинков и символических ссылок в Linux, а также объяснили, как эти механизмы упрощают управление files и каталогами в операционной системе.